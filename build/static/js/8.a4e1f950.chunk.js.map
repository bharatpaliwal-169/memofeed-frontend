{"version":3,"sources":["pages/PostDetails/Comment.jsx"],"names":["Promp","React","lazy","CommentSection","_ref","post","user","JSON","parse","localStorage","getItem","classes","useStyles","dispatch","useDispatch","commentsRef","useRef","_useState","useState","_useState2","_slicedToArray","comment","setComment","_useState3","comments","_useState4","setComments","handleComment","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_user$result","TheComment","newComments","wrap","_context","prev","next","commentPost","concat","result","name","_id","sent","current","scrollIntoView","behavior","stop","apply","arguments","_jsx","_Fragment","children","_jsxs","className","commentsOuterContainer","commentsInnerContainer","Typography","gutterBottom","variant","map","c","i","commentName","split","ref","style","width","marginTop","TextField","fullWidth","minRows","label","multiline","value","onChange","e","target","Button","disabled","length","color","onClick","Suspense","msg"],"mappings":"+MAYMA,EAAQC,IAAMC,MAAK,kBAAK,6BAAqC,IAqEpDC,UAnES,SAAHC,GAAgB,IAAXC,EAAID,EAAJC,KAClBC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,YACvCC,EAAUC,cACVC,EAAWC,cACXC,EAAcC,mBAEpBC,EAA6BC,mBAAS,IAAGC,EAAAC,YAAAH,EAAA,GAAlCI,EAAOF,EAAA,GAACG,EAAUH,EAAA,GACzBI,EAA+BL,mBAAa,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAMmB,UAASC,EAAAL,YAAAG,EAAA,GAAhDC,EAAQC,EAAA,GAACC,EAAWD,EAAA,GAErBE,EAAa,eAAAC,EAAAC,YAAAC,cAAAC,MAAG,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAL,cAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAGL,OADTL,EAAab,EACnBC,EAAW,IAAIe,EAAAE,KAAA,EACW1B,EAAS2B,YAAY,GAADC,OAAQ,OAAJnC,QAAI,IAAJA,GAAY,QAAR2B,EAAJ3B,EAAMoC,cAAM,IAAAT,OAAR,EAAJA,EAAcU,KAAI,MAAAF,OAAKP,GAAc7B,EAAKuC,MAAM,KAAD,EAA3FT,EAAWE,EAAAQ,KACjBnB,EAAYS,GAEZpB,EAAY+B,QAAQC,eAAe,CAAEC,SAAU,WAAY,wBAAAX,EAAAY,OAAA,GAAAjB,EAAA,KAC5D,kBARkB,OAAAJ,EAAAsB,MAAA,KAAAC,UAAA,KAWnB,OACEC,cAAAC,WAAA,CAAAC,SACEC,eAAA,OAAKC,UAAW7C,EAAQ8C,uBAAuBH,SAAA,CAC7CC,eAAA,OAAKC,UAAW7C,EAAQ+C,uBAAuBJ,SAAA,CAC7CF,cAACO,IAAU,CAACC,cAAY,EAACC,QAAQ,KAAIP,SAAC,aAC7B,OAAR9B,QAAQ,IAARA,OAAQ,EAARA,EAAUsC,KAAI,SAACC,EAAGC,GAAC,OAClBT,eAACI,IAAU,CAASC,cAAY,EAACC,QAAQ,YAAWP,SAAA,CAClDC,eAAA,UAAQC,UAAW7C,EAAQsD,YAAYX,SAAA,CAAES,EAAEG,MAAM,MAAM,GAAG,SACzDH,EAAEG,MAAM,KAAK,KAFCF,EAGJ,IAEfZ,cAAA,OAAKe,IAAKpD,OAEXT,EACCiD,eAAA,OAAKa,MAAO,CAAEC,MAAO,QAASf,SAAA,CAC5BF,cAACO,IAAU,CAACC,cAAY,EAACC,QAAQ,KAAMO,MAAO,CAAEE,UAAW,UAAWhB,SAAC,oBAGvEF,cAACmB,IAAS,CACRC,WAAS,EACTC,QAAS,EACTZ,QAAQ,WACRa,MAAM,eACNC,WAAS,EACTC,MAAOvD,EACPwD,SAAU,SAACC,GAAC,OAAKxD,EAAWwD,EAAEC,OAAOH,MAAM,IAG7CxB,cAAA,SAEAA,cAAC4B,IAAM,CAACZ,MAAO,CAAEE,UAAW,QAAUE,WAAS,EAACS,UAAW5D,EAAQ6D,OAC3DC,MAAM,UAAUtB,QAAQ,YAAYuB,QAASzD,EAAc2B,SAClE,eAKHF,cAACnD,IAAMoF,SAAQ,CAAA/B,SACXF,cAACpD,EAAK,CAACsF,IAAI,+CAMzB,C","file":"static/js/8.a4e1f950.chunk.js","sourcesContent":["// react\r\nimport React,{useState,useRef} from 'react'\r\n// import {Link} from 'react-router-dom'\r\nimport {useDispatch} from 'react-redux'\r\nimport {commentPost} from '../../redux/actions/post'\r\n\r\n\r\n//css\r\nimport {Typography,TextField,Button} from '@material-ui/core'\r\nimport useStyles from './styles'\r\n\r\n//components\r\nconst Promp = React.lazy(()=> import('../../components/LoginPromp'))\r\n\r\nconst  CommentSection = ({post}) => {\r\n  const user = JSON.parse(localStorage.getItem('profile'));\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const commentsRef = useRef();\r\n\r\n  const [comment,setComment] = useState('');\r\n  const [comments,setComments] = useState(post?.comments);\r\n\r\n  const handleComment = async () => {\r\n    // console.log(post);\r\n    const TheComment = comment;\r\n    setComment('');\r\n    const newComments = await dispatch(commentPost(`${user?.result?.name}: ${TheComment}`, post._id));\r\n    setComments(newComments);\r\n    \r\n    commentsRef.current.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  \r\n  return (\r\n    <>\r\n      <div className={classes.commentsOuterContainer}>\r\n        <div className={classes.commentsInnerContainer}>\r\n          <Typography gutterBottom variant=\"h4\">Comments</Typography>\r\n          {comments?.map((c, i) => (\r\n            <Typography key={i} gutterBottom variant=\"subtitle1\">\r\n              <strong className={classes.commentName}>{c.split(': ')[0]} : </strong>\r\n              {c.split(':')[1]}\r\n            </Typography>\r\n          ))}\r\n          <div ref={commentsRef} />\r\n        </div>\r\n        {user ? (\r\n          <div style={{ width: '100%' }}>\r\n            <Typography gutterBottom variant=\"h5\"  style={{ marginTop: '1.5rem' }}>\r\n              Write a comment\r\n            </Typography>\r\n            <TextField \r\n              fullWidth \r\n              minRows={4} \r\n              variant=\"outlined\" \r\n              label=\"Comment here\" \r\n              multiline\r\n              value={comment} \r\n              onChange={(e) => setComment(e.target.value)} \r\n            />\r\n            \r\n            <br />\r\n            \r\n            <Button style={{ marginTop: '10px' }} fullWidth disabled={!comment.length} \r\n                    color=\"primary\" variant=\"contained\" onClick={handleComment}\r\n            >\r\n              Comment\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <React.Suspense>\r\n              <Promp msg=\", You can make comment on this post.\"/>\r\n          </React.Suspense>\r\n        )}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default CommentSection;"],"sourceRoot":""}